<div class="p-6 bg-white rounded-xl shadow-md border border-slate-200">
  <h2 class="text-xl font-bold text-slate-800 mb-4">Finalizar Venta</h2>

  <div class="mb-6">
    <label class="block text-sm font-medium text-slate-700 mb-2">Cliente (Teléfono o Email)</label>
    <div class="flex gap-2">
      <input 
        type="text" 
        [(ngModel)]="customerInput" 
        placeholder="Email o Teléfono"
        class="flex-1 p-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-orange-500 outline-none text-sm"
      />
      <button 
        type="button"
        (click)="searchCustomer()"
        class="bg-slate-800 text-white px-4 rounded-lg hover:bg-slate-700 transition-colors">
        <span class="text-xs font-bold uppercase">Validar</span>
      </button>
    </div>

    @if (selectedCustomer) {
      <div class="mt-2 p-3 bg-green-50 border border-green-200 rounded-lg flex justify-between items-center">
        <div>
          <p class="text-[10px] text-green-600 font-bold uppercase">Socio Activo</p>
          <p class="text-sm font-bold text-slate-800">{{ selectedCustomer.name }}</p>
        </div>
        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold">
          Compras: {{ selectedCustomer.purchases_count }}
        </span>
      </div>
    }

    @if (isNewCustomer) {
      <div class="mt-2 p-4 bg-orange-50 border-2 border-dashed border-orange-200 rounded-lg">
        <p class="text-xs font-bold text-orange-700 mb-2">✨ NUEVO SOCIO: INGRESA NOMBRE</p>
        <input 
          type="text" 
          [(ngModel)]="customerName"
          placeholder="Nombre completo"
          class="w-full p-2 rounded border border-orange-200 outline-none text-sm"
        />
      </div>
    }

    @if (errorMessage) {
      <p class="mt-1 text-xs text-red-500">{{ errorMessage }}</p>
    }
  </div>

  <button 
    (click)="confirmSale()"
    class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg transition-colors shadow-lg mt-4">
    Confirmar y Cobrar
  </button>
</div>